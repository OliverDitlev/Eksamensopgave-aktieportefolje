<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PortofolioTracker</title>
    
    <%- include('partials/menu') %>

    <link rel="stylesheet" href="/css/style.css">
 
</head>

<body id="main" class="main">
<button id = "openformbtn">Add account</button>
    <div id = "popupform" class="popup hidden">
        <div id = "insideform">
        <% if (errors.length) { %>
            <ul class="error-list">
              <% errors.forEach(e=>{ %><li><%= e.msg %></li><% }) %>
            </ul>
          <% } %>

       
            <span id="closeformbtn">X</span>

            <h2>Create account</h2>
            <form action="/accounts" method="post" id = "ledgerform">
                <label for="name">Account name</label>
                <input type="text" name="name" required>
                

                <label for="bank">Bank</label>
                <select name="bank">
                    <option value="Nordea">Nordea</option>
                    <option value="Danske Bank">Danske Bank</option>
                </select>

                <label for="balance"> Starting balance </label>
                <input type="number" name = "balance" required>
               

                <label for="currency">Currency</label>
                <select name="currency" id="choseCurrency">
                    <option value="DKK">DKK</option>
                    <option value="USD">USD</option>
            </select>
                
            <button type="submit" >Open account</button>
            
        </form>
        </div>
    </div>
    <table>
        <tr>
            <th>Name</th>
            <th>Bank</th>
            <th>Currency</th>
            <th>Balance</th>
            
        </tr>
        
            <% accounts.forEach(value => { %>
        <tr>   
            <td><%= value.name %></td> 
            <td><%= value.bank %></td>
            <td><%= value.balance %></td>
            <td><%= value.currency %></td>
            
        </tr>
            <%})%>
    </table>



    <script>
        let formopen = false

        const closeformbtn = document.getElementById('closeformbtn')
        const openformbtn = document.getElementById('openformbtn')
        const popupform = document.getElementById('popupform')

        function formpopup(){
            if(formopen){
                popupform.classList.add('hidden')
            } else {
                popupform.classList.remove('hidden')
            }
            formopen = !formopen
        }
        openformbtn.addEventListener('click', formpopup)
        closeformbtn.addEventListener('click', formpopup)
        
        
    </script>
  </body>
</html>
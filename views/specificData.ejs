<h2>Aktiekurs for <%= symbol %></h2>

<% if (error) { %>
  <p style="color: red;"><%= error %></p>
<% } else { %>
  <canvas id="stockChart" width="600" height="300"></canvas>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Inline script med data og plot-funktion -->
  <script>
    const currentPrice = <%- JSON.stringify(currentPrice) %>;
    const monthlyPrices = <%- monthlyPrices %>;
    const symbol = "<%= symbol %>";

    const ctx = document.getElementById('stockChart').getContext('2d');
    const labels = ['I dag', ...Array.from({ length: 12 }, (_, i) => `${12 - i} mdr siden`)];
    const prices = [currentPrice, ...monthlyPrices];

    new Chart(ctx, {
      type: 'line',
      data: {
        labels: labels,
        datasets: [{
          label: `Kurs for ${symbol}`,
          data: prices,
          borderColor: 'blue',
          borderWidth: 2,
          fill: false,
          tension: 0.3,
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: false
          }
        }
      }
    });
  </script>
<% } %>



